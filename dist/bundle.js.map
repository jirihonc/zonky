{"version":3,"sources":["webpack:///webpack/bootstrap 51f4c88c6091106609b3","webpack:///external \"React\"","webpack:///./src/index.tsx","webpack:///external \"ReactDOM\"","webpack:///./src/components/RatingForm.tsx","webpack:///./src/functions/RatingCalculator.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 51f4c88c6091106609b3","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 0\n// module chunks = 0","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport RatingForm from \"./components/RatingForm\";\n\n\nReactDOM.render(\n    <RatingForm label=\"Zonky, výpočet průměrné půjčky v závislosti na ratingu\" />, \n    document.getElementById(\"content\")\n);\n\n\n// WEBPACK FOOTER //\n// ./src/index.tsx","module.exports = ReactDOM;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 2\n// module chunks = 0","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\n\nimport ratingCalc, {LoanState} from \"../functions/RatingCalculator\";\n\ninterface LabelProps {label: string}\n\nexport default class RatingForm extends React.Component<LabelProps, LoanState> {\n\n    constructor(props: LabelProps) {\n        super(props);\n        this.state = {\n            rating: '',\n            numOfCust: 0,\n            avgLoan: 0,\n            totalLoan: 0,\n            inProcess: false\n        };\n\n        this.formChanged = this.formChanged.bind(this);\n    }\n\n    formChanged(event: any) {\n        const target = event.target;\n        const name = target.name;\n        let rating = target.value;\n \n        let formValues = {...this.state, [name]: rating};\n        \n        // default value (clear previous state)\n        this.setState(new LoanState(rating, 0, 0, 0, true));\n\n        ratingCalc(\n            rating, \n            (loan: LoanState) => this.setState(loan), \n            (err: string) => {\n                this.setState(new LoanState(rating)); \n                alert(err);\n            })\n    }  \n\n    render() {\n\n        let avg = (this.state.inProcess) ? 'zpracovává se...' : this.state.avgLoan.toLocaleString('cs-CZ', { maximumFractionDigits: 0 }) + ' kč';\n\n        const count = this.state.numOfCust;\n\n        return (\n\n            <div>\n                <h1>{this.props.label}</h1>                \n\n                <fieldset>\n                    <div className=\"row\">                        \n                        <div className=\"col-md-6\">\n                            <div className=\"styled-select slate\">                     \n                                <select onChange={this.formChanged} id=\"rating\" name=\"rating\" value={this.state.rating}>\n                                    <option value=\"\" disabled>Vyber rating</option>\n                                    <option value=\"AAAAA\">A**  téměř bez rizika</option>\n                                    <option value=\"AAAA\">A*   nejnižší riziko</option>\n                                    <option value=\"AAA\">A++  nízké riziko</option>\n                                    <option value=\"AA\">A+   nízké riziko</option>\n                                    <option value=\"A\">A    nižší riziko</option>\n                                    <option value=\"B\">B    střední riziko</option>\n                                    <option value=\"C\">C    vyšší riziko</option>\n                                    <option value=\"D\">D    rizikové</option>\n                                </select>\n                            </div>\n                        </div>\n\n                        <div className=\"col-md-6\">\n                            <h3>Průměrná výše půjčky: {avg}</h3>\n                        </div>\n                    </div>\n                </fieldset> \n            </div>\n         \n        );    \n    }    \n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/RatingForm.tsx","export class LoanState {\n\n    rating: string;\n    numOfCust: number;\n    avgLoan: number;\n    totalLoan: number;\n    inProcess: boolean;\n\n    constructor(rating: string, numOfCust: number = 0, avgLoan: number = 0, totalLoan: number = 0, inProcess: boolean = false) {\n        this.rating = rating;\n        this.numOfCust = numOfCust;\n        this.avgLoan = avgLoan;\n        this.totalLoan = totalLoan;\n        this.inProcess = inProcess;\n    } \n} \n\ninterface ZonkyPic {\n    name: string,\n    url: string\n}\n\nexport interface ZonkyLoan {\n    id: number,\n    url: string,\n    name: string,\n        story: string,\n        purpose: string,\n        photos: ZonkyPic[],\n        nickName: string,\n        termInMonths: number,\n        interestRate: number,\n        rating: string,\n        topped: boolean,\n        amount: number,\n        remainingInvestment: number,\n        investmentRate: number,\n        covered: boolean,\n        datePublished: string,\n        published: boolean,\n        deadline: string,\n        investmentsCount: number,\n        questionsCount: number,\n        region: string,\n        mainIncomeType: string   \n}\n\nfunction auth(): string {\n\n    var request = new XMLHttpRequest();\n\n    request.open('POST', 'https://api.zonky.cz/oauth/token', true);\n\n    // request.withCredentials = true;\n    request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    request.setRequestHeader('Authorization', 'Basic d2ViOndlYg==');\n\n    request.onreadystatechange = function () {\n        if (this.readyState === 4) {\n            console.log('Status:', this.status);\n            console.log('Headers:', this.getAllResponseHeaders());\n            console.log('Body:', this.responseText);\n        }\n    };\n\n    request.onerror = function (this: XMLHttpRequestEventTarget, ev: ErrorEvent) {\n        console.log('err:', this);\n        console.log('event:', ev);\n    };\n\n    var body = \"username=test&password=test&grant_type=password&scope=SCOPE_APP_WEB\";\n\n    request.send(body);    \n\n    return \"done\";\n}\n\nexport default function (rating: string, updateLoanResult: (loan: LoanState) => void, errorResult: (errText: string) => void): void {\n    \n    console.log('selected rating: ' + rating);   \n\n    // https://www.thepolyglotdeveloper.com/2014/08/bypass-cors-errors-testing-apis-locally/\n    // https://api.zonky.cz/loans/marketplace?rating__eq=D\n    \n    var request = new XMLHttpRequest();\n\n    request.open('GET', 'https://api.zonky.cz/loans/marketplace?rating__eq=' + rating);\n    \n    request.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');\n    request.setRequestHeader('Accept', 'application/json');\n\n    // https://crossorigin.me/\n\n    request.setRequestHeader('X-Page', '0');\n    request.setRequestHeader('X-Size', '3000');\n\n    request.onreadystatechange = function () {\n\n        if (this.readyState === 4) {\n            \n            let totalCount = this.getResponseHeader('X-Total');\n\n            console.log(\"total count: \" + totalCount);\n            \n            if(this.responseText && this.responseText.startsWith(\"[\")) {\n                const data = JSON.parse(this.responseText);\n\n                let loan = calculateLoan(rating, data);\n\n                updateLoanResult(loan); \n            } else {\n                console.log('No response');\n                console.log(this.responseText);         \n            }\n        }\n    };\n\n\n    request.onerror = function (this: XMLHttpRequestEventTarget, ev: ErrorEvent) {\n        console.log('err:', this);\n        console.log('event:', ev);\n        errorResult(\"Network connection problem: \" + ev.type);\n    };\n\n    request.send();\n} \n\nexport function calculateLoan(rating: string, data : ZonkyLoan[]): LoanState {\n   \n    let count = data.length;\n    let total = data.reduce(function(sum, user, index) {        \n        return sum + user.amount;\n      }, 0);\n\n\n    console.log('Number of loans: ' + count);\n    // console.log('Avg loan is ' + (sum / count));\n\n    return new LoanState(rating, count, (total / count), total, false);\n}\n\n\n// WEBPACK FOOTER //\n// ./src/functions/RatingCalculator.ts"],"sourceRoot":""}